<%- include('header') %>

<main>
  <div class="container">
    <div class="lds-ring d-none" id="preloader">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
    
    <div class="definition">
      <h2 class="text-center">Definitions</h2>
      <ol>
        <li><strong>Assigned and solved</strong>: a conversation that is resolved (it was resolved by an operator)</li>
        <li><strong>üîÅAssigned & Not Solved</strong>: a conversation that is not yet resolved (and is probably ongoing or awaiting reply)</li>
        <li><strong>üö®Pending</strong>: a conversation that got no reply from operators (the user is awaiting reply)</li>
      </ol>
    </div>
    <h1 class="text-center mt-3 mb-5">Crisp reports</h1>
    <div id="flash" class=" mt-3 mb-5">
  
    </div>
    <div class="tabs-container mt-3">
      <% if (agents) { %>
      <div class="row">
        <div class="col-md-8">
          <select class="form-select" aria-label="Default select example" id="agents">
            
            <% agents.forEach(item => { %>
            <option value="<%= item.id %>"><%= item.name %></option>
            <% }) %>
          </select>
        </div>
        
        <div class="col-md-4"><button type="button" class="btn btn-primary" id="show_reports">Show reports</button></div>
      </div>
      <% } %>

      <h2 class="mt-5 text-center" id="agent_name"></h2>
      <table class="table table-info table-striped mt-5">
        <thead>
          <tr>
            <th scope="col">Period</th>
            <th scope="col">Total</th>
            <th scope="col">Not solved</th>
            <th scope="col">Solved</th>
            <th scope="col">Solved same day</th>
            <th scope="col">Solved another day</th>
            <th scope="col">Pending</th>
            <th scope="col"><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i></th>
            <th><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i></th>
            <th><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i></th>
            <th><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i></th>
            <th><i class="bi bi-star-fill"></i></th>
            <th></th>
          </tr>
        </thead>

        <tbody id="tableGeneral">
          
            
          
        </tbody>
      </table>
      

      
      
      
    </div>
  </div>
</main>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Ooops, something happened, try again</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">...</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="dateModal" tabindex="-1" aria-labelledby="dateModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="dateModalLabel">Please try again</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">You need to select agent and date range</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="/crisp-front.js"></script>
<!--script src="/script.js"></script-->
</body>
</html>